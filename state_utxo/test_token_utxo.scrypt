contract TestUTXO {
    static const int DataLen = 1;
    PubKey pubKey;
    @state
    int amount;
    public function spend(Sig sig, int amount ,SigHashPreimage preimage) {
        require(checkSig(sig, this.pubKey));
        require(Tx.checkPreimage(preimage));
        bytes scriptCode = SigHash.scriptCode(preimage);
        int codeend = 138;
        int inputAmount = unpack(scriptCode[codeend : codeend+DataLen]);
        require(inputAmount == amount);
        this.amount = inputAmount;
        require(this.amount >= 0);
    }
}